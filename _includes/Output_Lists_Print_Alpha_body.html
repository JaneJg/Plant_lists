<script>
// -------------------------  data bit -----------------------------
var item = localStorage.getItem('Item');
var title = localStorage.getItem('Title');
var Header = localStorage.getItem('headr');
$(document).ready(function(){
let species;
$.getJSON('Data/Lists.json', function(results){
  records = results.filter(function(obj) {
  return obj.AREA === item;
  }); // end filter

$.getJSON('Data/Names.json', function(names){

   let filterIds = new Set(records.map(item => item.CODE));
   species = names.filter(item => filterIds.has(item.CODE));
	dummy.insertAdjacentHTML( 'beforebegin',"<h2>List of Species for <b>" + title + "</h2>");
	dummy.insertAdjacentHTML( 'beforeend', Header);
	dummy.insertAdjacentHTML( 'beforeend', '<tr><td colspan="5">' + '<hr style="height:2px;width:100%; color:gray;background-color:gray">' + '</td></tr>');
	Species_List.insertAdjacentHTML( 'beforeend',"<TR><TD width = 2%><b>Adv</b></TD><TD width = 47%><b>Name</b></TD><TD><b>Common name</b></TD><TD></TD></TR>");

// ---------------------------------------------  data cycle -------------------------------------
     species.forEach(function(ids) {
Species_List.insertAdjacentHTML( 'beforeend',"<TR><TD>" + ids.E + "</TD><TD><i>" + ids.Name + " " +  ids.Notes + "</i></TD><TD>" + ids.C_NAME + "</TD></TR>");
      }); // end of forEach
    }) // end of second Ajax call
  }) // end of which?? Ajax call
 }) // end of $(document).ready() function
</script>


