<div id="map_canvas"></div>
<div id="idInfo">

<script>
  var info;
  var AId;
  var title;
  let map;
  let marker;
 		
  async function initMap() {
  const Nelson = {lat: -41.307570, lng: 173.232948};				
  const Rotorua = {lat: -38.074216, lng: 176.268309};
  var clicked = false;
      const { Map } = await google.maps.importLibrary("maps");
      const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");
      const { InfoWindow } = await google.maps.importLibrary("infoWindow");

  var cenmap = new google.maps.Map(document.getElementById("map_canvas"), {zoom: 9, center: Rotorua, mapTypeId: 'terrain', streetViewControl: false});
// --------------------------------- map intiated ---------------------------------------------


    $.getJSON('Data/Masterls.json', function(results){

        results.forEach(function(ids) {
var infoContent = "<p><b>Name:</b> " + ids.NAME + "<br>" + "<b>Author:</b> " + ids.AUTHOR + "<br><b>Date(s):</b> " + ids.DATE + "<br><b>Source:</b> " + ids.SOURCE + "<br><a href='Output_Lists.html' target = '_blank'>" + " <b> Print the list</b></a>" + "</p>";  	

var markers = new google.maps.Marker({position: new google.maps.LatLng(ids.LATITUDE, ids.LONGITUDE), map: cenmap, title: ids.NAME});
 		markers.info = new google.maps.InfoWindow({content: infoContent});

  	google.maps.event.addListener(markers, 'click', function(){
	markers.info.open (cenmap, markers); 

  	    infoH = "<TR><td width = 2%></td><td width = 48%><b>Author(s):</b> " + ids.AUTHOR + 
	"</td><td width 20%><b>Date(s):</b></td ><td>" + ids.DATE + "; " + ids.UPDATES + 
	"</td><td width = 30%><b>Source:</b> " + ids.SOURCE + "</td></tr>"; 
	    let AId = ids.FELDS;
	    let title = ids.NAME;
	    let header_t =  "Author: \t" + ids.AUTHOR + "\tDate(s): " + ids.DATE + "\tSource: " + ids.SOURCE + "\n";
            sessionStorage.setItem('Title', title);
            sessionStorage.setItem('Item', AId);
            sessionStorage.setItem('headr', infoH);
            sessionStorage.setItem('Header_t', header_t);

        }); 
     }); 
   });	

      // Add event listener to the dropdown menu
      const dropdown = document.getElementById("locationDropdown");
      dropdown.addEventListener("change", function () {
        const [lat, lng] = this.value.split(",").map(Number);
        const newCenter = { lat, lng};
        cenmap.setCenter(newCenter);
      });

  }   		
</script>

